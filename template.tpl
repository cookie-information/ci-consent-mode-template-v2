___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cookieinformation",
  "version": 1,
  "securityGroups": [],
  "displayName": "Cookie Information + Consent Mode v2",
  "brand": {
    "id": "CookieInformation",
    "displayName": "Cookie Information",
    "thumbnail": "data:image/jpeg;base64,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\u003d"
  },
  "description": "Collect user consent and share the signals correctly with Google to ensure the well-functioning of your Google Ads, Google Analytics, and Google Marketing Platform in EEA region.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "CHECKBOX",
    "name": "inject_script",
    "checkboxText": "Add Cookie Information Consent Banner",
    "simpleValueType": true,
    "help": "If you have already added the consent banner script to your website code, leave this option unticked and add data-gcm-enabled\u003d\"false\" to your banner script placed on the website."
  },
  {
    "type": "RADIO",
    "name": "language_settings",
    "displayName": "Language options",
    "radioItems": [
      {
        "value": "none",
        "displayValue": "None (Default language value will be used)"
      },
      {
        "value": "language_custom",
        "displayValue": "By GTM variable",
        "subParams": [
          {
            "type": "SELECT",
            "name": "language_custom",
            "displayName": "",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "language_settings",
                "paramValue": "language_custom",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "value": "different_for_specific_domain",
        "displayValue": "Different language for specific domain",
        "subParams": [
          {
            "type": "SIMPLE_TABLE",
            "name": "different_for_specific_domain",
            "displayName": "Language for specific domain",
            "simpleTableColumns": [
              {
                "defaultValue": "",
                "displayName": "Domain",
                "name": "domain_column",
                "type": "TEXT",
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  },
                  {
                    "type": "REGEX",
                    "args": [
                      "^(?!.*(?:http:\\/\\/|https:\\/\\/|www\\.|www)).*$"
                    ],
                    "errorMessage": "The value must be a canonical domain. See language options hint."
                  }
                ],
                "isUnique": true,
                "valueHint": ""
              },
              {
                "defaultValue": "EN",
                "displayName": "Language",
                "name": "language_column",
                "type": "SELECT",
                "selectItems": [
                  {
                    "value": "SQ",
                    "displayValue": "Albanian"
                  },
                  {
                    "value": "AR",
                    "displayValue": "Arabic"
                  },
                  {
                    "value": "BG",
                    "displayValue": "Bulgarian"
                  },
                  {
                    "value": "CA",
                    "displayValue": "Catalan"
                  },
                  {
                    "value": "ZH",
                    "displayValue": "Chinese"
                  },
                  {
                    "value": "TW",
                    "displayValue": "Chinese (Taiwan)"
                  },
                  {
                    "value": "HR",
                    "displayValue": "Croatian"
                  },
                  {
                    "value": "CS",
                    "displayValue": "Czech"
                  },
                  {
                    "value": "DA",
                    "displayValue": "Danish"
                  },
                  {
                    "value": "NL",
                    "displayValue": "Dutch"
                  },
                  {
                    "value": "EN",
                    "displayValue": "English"
                  },
                  {
                    "value": "ET",
                    "displayValue": "Estonian"
                  },
                  {
                    "value": "FI",
                    "displayValue": "Finnish"
                  },
                  {
                    "value": "FR",
                    "displayValue": "French"
                  },
                  {
                    "value": "DE",
                    "displayValue": "German"
                  },
                  {
                    "value": "EL",
                    "displayValue": "Greek"
                  },
                  {
                    "value": "KL",
                    "displayValue": "Greenlandic"
                  },
                  {
                    "value": "HE",
                    "displayValue": "Hebrew"
                  },
                  {
                    "value": "HI",
                    "displayValue": "Hindi"
                  },
                  {
                    "value": "HU",
                    "displayValue": "Hungarian"
                  },
                  {
                    "value": "IS",
                    "displayValue": "Icelandic"
                  },
                  {
                    "value": "ID",
                    "displayValue": "Indonesian"
                  },
                  {
                    "value": "IT",
                    "displayValue": "Italian"
                  },
                  {
                    "value": "JA",
                    "displayValue": "Japanese"
                  },
                  {
                    "value": "KO",
                    "displayValue": "Korean"
                  },
                  {
                    "value": "LV",
                    "displayValue": "Latvian"
                  },
                  {
                    "value": "LT",
                    "displayValue": "Lithuanian"
                  },
                  {
                    "value": "MS",
                    "displayValue": "Malay"
                  },
                  {
                    "value": "NB",
                    "displayValue": "Norwegian Bokmål"
                  },
                  {
                    "value": "NO",
                    "displayValue": "Norwegian macrolanguage"
                  },
                  {
                    "value": "NN",
                    "displayValue": "Norwegian nynorsk"
                  },
                  {
                    "value": "PL",
                    "displayValue": "Polish"
                  },
                  {
                    "value": "PT",
                    "displayValue": "Portugese"
                  },
                  {
                    "value": "RO",
                    "displayValue": "Romanian"
                  },
                  {
                    "value": "RU",
                    "displayValue": "Russian"
                  },
                  {
                    "value": "SR",
                    "displayValue": "Serbian"
                  },
                  {
                    "value": "SK",
                    "displayValue": "Slovak"
                  },
                  {
                    "value": "SL",
                    "displayValue": "Slovenian"
                  },
                  {
                    "value": "ES",
                    "displayValue": "Spanish"
                  },
                  {
                    "value": "SV",
                    "displayValue": "Swedish"
                  },
                  {
                    "value": "TH",
                    "displayValue": "Thai"
                  },
                  {
                    "value": "TR",
                    "displayValue": "Turkish"
                  },
                  {
                    "value": "UK",
                    "displayValue": "Ukrainian"
                  },
                  {
                    "value": "VI",
                    "displayValue": "Vietnamese"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ],
                "macrosInSelect": true
              }
            ],
            "enablingConditions": [
              {
                "paramName": "language_settings",
                "paramValue": "different_for_specific_domain",
                "type": "EQUALS"
              }
            ],
            "help": "Domain value should be a canonical domain.\nIt should match with domain from consent solution available in CMP dashboard."
          }
        ]
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "inject_script",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "By GTM variable: Here you can add dynamic languages based on custom variable, e.g. Custom JavaScript.\n\nDifferent language for specific domain: This option allows you to add different languages for specific domains (Note: You have to provide canonical domain without \"https://\", \"http://\" and \"www\", e.g. my-domain.com)"
  },
  {
    "type": "SELECT",
    "name": "language",
    "displayName": "Default  Language",
    "macrosInSelect": true,
    "selectItems": [
      {
        "value": "SQ",
        "displayValue": "Albanian"
      },
      {
        "value": "AR",
        "displayValue": "Arabic"
      },
      {
        "value": "BG",
        "displayValue": "Bulgarian"
      },
      {
        "value": "CA",
        "displayValue": "Catalan"
      },
      {
        "value": "ZH",
        "displayValue": "Chinese"
      },
      {
        "value": "TW",
        "displayValue": "Chinese (Taiwan)"
      },
      {
        "value": "HR",
        "displayValue": "Croatian"
      },
      {
        "value": "CS",
        "displayValue": "Czech"
      },
      {
        "value": "DA",
        "displayValue": "Danish"
      },
      {
        "value": "NL",
        "displayValue": "Dutch"
      },
      {
        "value": "EN",
        "displayValue": "English"
      },
      {
        "value": "ET",
        "displayValue": "Estonian"
      },
      {
        "value": "FI",
        "displayValue": "Finnish"
      },
      {
        "value": "FR",
        "displayValue": "French"
      },
      {
        "value": "DE",
        "displayValue": "German"
      },
      {
        "value": "EL",
        "displayValue": "Greek"
      },
      {
        "value": "KL",
        "displayValue": "Greenlandic"
      },
      {
        "value": "HE",
        "displayValue": "Hebrew"
      },
      {
        "value": "HI",
        "displayValue": "Hindi"
      },
      {
        "value": "HU",
        "displayValue": "Hungarian"
      },
      {
        "value": "IS",
        "displayValue": "Icelandic"
      },
      {
        "value": "ID",
        "displayValue": "Indonesian"
      },
      {
        "value": "IT",
        "displayValue": "Italian"
      },
      {
        "value": "JA",
        "displayValue": "Japanese"
      },
      {
        "value": "KO",
        "displayValue": "Korean"
      },
      {
        "value": "LV",
        "displayValue": "Latvian"
      },
      {
        "value": "LT",
        "displayValue": "Lithuanian"
      },
      {
        "value": "MS",
        "displayValue": "Malay"
      },
      {
        "value": "NB",
        "displayValue": "Norwegian Bokmål"
      },
      {
        "value": "NO",
        "displayValue": "Norwegian macrolanguage"
      },
      {
        "value": "NN",
        "displayValue": "Norwegian nynorsk"
      },
      {
        "value": "PL",
        "displayValue": "Polish"
      },
      {
        "value": "PT",
        "displayValue": "Portugese"
      },
      {
        "value": "RO",
        "displayValue": "Romanian"
      },
      {
        "value": "RU",
        "displayValue": "Russian"
      },
      {
        "value": "SR",
        "displayValue": "Serbian"
      },
      {
        "value": "SK",
        "displayValue": "Slovak"
      },
      {
        "value": "SL",
        "displayValue": "Slovenian"
      },
      {
        "value": "ES",
        "displayValue": "Spanish"
      },
      {
        "value": "SV",
        "displayValue": "Swedish"
      },
      {
        "value": "TH",
        "displayValue": "Thai"
      },
      {
        "value": "TR",
        "displayValue": "Turkish"
      },
      {
        "value": "UK",
        "displayValue": "Ukrainian"
      },
      {
        "value": "VI",
        "displayValue": "Vietnamese"
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "inject_script",
        "paramValue": true,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "PARAM_TABLE",
    "name": "defaultSettings",
    "displayName": "Default consent settings",
    "paramTableColumns": [
      {
        "param": {
          "type": "SELECT",
          "name": "ad_user_data",
          "displayName": "Ad user data",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_personalization",
          "displayName": "Ad personalization",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_storage",
          "displayName": "Ad storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "analytics_storage",
          "displayName": "Analytics storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "functionality_storage",
          "displayName": "Functionality storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "personalization_storage",
          "displayName": "Personalization storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "denied"
            },
            {
              "value": "granted",
              "displayValue": "granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "TEXT",
          "name": "region",
          "displayName": "Region(s) (leave blank to have consent apply to all regions)",
          "simpleValueType": true,
          "help": "If you\u0027d like to set the same custom settings for more than one region, you can write multiple region codes separated by comma (e.g. ES,US,DA)",
          "valueHint": "E.g. DA,EN,US"
        },
        "isUnique": true
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "ads_data_redaction",
    "checkboxText": "Redact Ads Data",
    "simpleValueType": true
  },
  {
    "type": "CHECKBOX",
    "name": "url_passthrough",
    "checkboxText": "Pass through URL parameters",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "wait_for_update",
    "displayName": "Wait for update",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_NEGATIVE_NUMBER"
      }
    ],
    "defaultValue": 500
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const callInWindow = require('callInWindow');
const getUrl = require('getUrl');
const gtagSet = require('gtagSet');
const getCookieValues = require('getCookieValues');
const JSON = require('JSON');
const makeInteger = require('makeInteger');
const injectScript = require('injectScript');
const encodeUriComponent = require('encodeUriComponent');
const queryPermission = require('queryPermission');

 const getLanguage = function() {
     const defaultLanguage = data.language;
     const language_settings = data.language_settings;
     const languageData = data[language_settings];

    // returns default language when "none" option is chosen
    // or when any option target has falsy value
    if(language_settings === "none" || !languageData) return defaultLanguage;

    // handles languages for each provided domain
    if(language_settings === "different_for_specific_domain") {
      const websiteCanonicalDomain = getUrl("href");

      const matchedLanguage = languageData.filter(function(el) {
        return websiteCanonicalDomain.indexOf(el.domain_column) !== -1;
      });
      return matchedLanguage.length !== 0 ? matchedLanguage[0].language_column : defaultLanguage;

    }

    // returns language from GTM variable
    return data[language_settings];
  };

/*
 *   Called when consent changes. Assumes that consent object contains keys which
 *   directly correspond to Google consent types.
 */
const onUserConsent = (consent) => {
  const marketingConsent = consent.cookie_cat_marketing ? 'granted' : 'denied';
  const analyticsStorage = consent.cookie_cat_statistic ? 'granted' : 'denied';
  const functionalityStorage = consent.cookie_cat_functional ? 'granted' : 'denied';
  const personalizationStorage = consent.cookie_cat_functional ? 'granted' : 'denied';
  const securityStorage = 'granted';
  const consentModeStates = {
    ad_storage: marketingConsent,
    ad_user_data: marketingConsent,
    ad_personalization: marketingConsent,
    analytics_storage: analyticsStorage,
    functionality_storage: functionalityStorage,
    personalization_storage: personalizationStorage,
    security_storage: securityStorage,
  };
  updateConsentState(consentModeStates);
  gtagSet({
    'ads_data_redaction': marketingConsent === 'denied' && !!data.ads_data_redaction,
    'url_passthrough': !!data.url_passthrough,
    'developer_id.dNmIyNz': true
  });
};
const setSettings = (rowSetting) => ({
  ad_storage: rowSetting.ad_storage || 'denied',
  ad_user_data: rowSetting.ad_user_data || 'denied',
  ad_personalization: rowSetting.ad_personalization || 'denied',
  analytics_storage: rowSetting.analytics_storage || 'denied',
  functionality_storage: rowSetting.functionality_storage || 'denied',
  personalization_storage: rowSetting.personalization_storage || 'denied',
  security_storage: rowSetting.security_storage || 'denied',
  wait_for_update: makeInteger(data.wait_for_update) || 500,
});
const handleDefaultsSettingsWithRegions = (settingsRows) => {
    let isGlobalRegionsDefaultsSet = false;
     settingsRows.forEach((row) => {
     let settings = {};
     // means that user adjusted global defaults - for rest regions
     if(row.region.trim() === '') {
       isGlobalRegionsDefaultsSet = true;
       settings = setSettings(row);
     } else {
       settings = setSettings(row);
       settings.region = row.region.split(",").map(el => el.trim());
    }
    setDefaultConsentState(settings);
   });
   if(isGlobalRegionsDefaultsSet === false) {
     let globalDefaultSettings = {};
     globalDefaultSettings = setSettings({});
     setDefaultConsentState(globalDefaultSettings);
   }
};
/*
 *   Executes the default command, sets the developer ID
 */
const setDefaults = () => {
  const defaultSettings = data.defaultSettings || [];

  if(defaultSettings.length > 0) {
    handleDefaultsSettingsWithRegions(defaultSettings);
  } else {
    let defaultSettings = {};
    defaultSettings = setSettings({});
    setDefaultConsentState(defaultSettings);
  }

  /*
   * Optional settings using gtagSet
   */
  gtagSet({
    'ads_data_redaction': !!data.ads_data_redaction,
    'url_passthrough': !!data.url_passthrough,
    'developer_id.dNmIyNz': true,
  });
};

/*
 * Sets up the consent update callback
 */
const main = () => {
  if (getCookieValues("CookieInformationConsent").toString() !== '') {
      const consentString = getCookieValues("CookieInformationConsent")[0];
      const consent = JSON.parse(consentString);
      const consentsApproved = consent.consents_approved;
      let consentTypes = {};
      let category = '';
      for (let i = 0; i < consentsApproved.length; ++i) {
        category = consentsApproved[i];
        consentTypes[category] = true;
      }
      onUserConsent(consentTypes);
   }
  callInWindow('CookieInformation.addCustomEventListenerForGTMConsentModeTemplate', onUserConsent);
  data.gtmOnSuccess();
};

setDefaults();

if (data.inject_script) {
  const domainLanguage = getLanguage();
  const scriptUrl = 'https://policy.app.cookieinformation.com/uc.js?language=' + encodeUriComponent(domainLanguage || 'default') + '&gcmEnabledByConsentLibrary=false';

  if(queryPermission('inject_script', scriptUrl)) injectScript(scriptUrl, main, data.gtmOnFailure);
  else data.gtmOnFailure();
} else {
  main();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtagSet"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CookieInformation.addCustomEventListenerForGTMConsentModeTemplate"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "developer_id.dNmIyNz"
              },
              {
                "type": 1,
                "string": "url_passthrough"
              },
              {
                "type": 1,
                "string": "ads_data_redaction"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "CookieInformationConsent"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.cookieinformation.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 30.01.2024, 15:48:59
